# lv2_Library_management

## Описание задачи

### prompt

---

Контекст:

Я начинающий Python разработчик. Освоил основы языка Python. В данный момент, разбираюсь с ООП.

Я хотел бы, чтоб ты, придумал для меня задание, которое я постараюсь выполнить, и предоставляю свое решение тебе, для проверки, с целью определить мой уровень знаний. Что то вроде лабораторной работы для студента.

В процессе решения мной этого задания, я возможно сочту необходимым, задать уточняющие вопросы. Ты в свою очередь, отвечая на уточняющий вопрос, не раскрывай для меня решение задачи очевидным образом. Сформулируй ответ на уточняющий вопрос так, чтобы он являлся просто наводящим.

Также, я хотел бы иметь возможность, получить от тебя подсказку. Если, в ходе размышления над решением задачи, я зайду в тупик, то так и скажу “Дай пожалуйста подсказку” связанную с тем или иным аспектом рассматриваемой темы.

Задание должно быть:

Ориентировано на проверку знаний в области ООП Python

Определенного уровня сложности по шкале от 1 до 10, где 1 это очень легкое задание, а 10 очень сложное.

Итак. Прошу составить задание (лабораторную работу), с уровнем сложности 2.

---

Задание (уровень сложности 2):

**Тема**: Основы объектно-ориентированного программирования (ООП) в Python.

### **Задание**:

Создайте класс, который описывает простую систему управления книгами в библиотеке.

1. Определите класс `Book`, который содержит следующую информацию:
    - Название книги
    - Автор книги
    - Статус книги (в библиотеке или выдана)
2. Определите класс `Library`, который должен:
    - Содержать список книг.
    - Иметь методы для добавления книги, выдачи книги пользователю и возврата книги в библиотеку.
    - Отображать текущее состояние всех книг в библиотеке (название, автор, статус).

### **Условия**:

- При добавлении книги проверяйте, что книга с таким названием уже не существует.
- При выдаче книги проверяйте, что она доступна (то есть, находится в библиотеке).
- При возврате книги обновляйте её статус.

### **Дополнительное задание** (по желанию):

- Реализуйте метод поиска книг по автору.

Если возникнут вопросы или будет нужна подсказка, можешь задать уточняющий вопрос.

---

---

## Предоставленное решение 1

### prompt

---

Я готов предоставить свое решение данной задачи.

```python
class Book:

    def __init__(self, title: str, author: str, status: bool = True) -> None:
        self.title = title
        self.author = author
        self.status = status

    def get_status(self):
        """Возвращает статус книги в удобочитаемом формате.
        Returns:
            str: Строка описывающая статус книги в удобочитаемом формате.
        """
        if (self.status):
            return 'В библиотеке'
        else:
            return 'У читателя'

    def print_info_book(self):
        """Распечатывает сводную информация о книге."""
        print(f'''
            Название: {self.title}
            Автор: {self.author}
            Статус: {self.get_status()}''')

#######################################################################

class Library:
    def __init__(self) -> None:
        self.lib = []

    def is_stock(self, book_obj: Book) -> bool:
        """Проверяет регистрацию книги.
        Args:
            book_obj (Book): Экземпляр объекта Book.
        Returns:
            bool: True или False соответственно.
        """
        for b in self.lib:
            if (b.title == book_obj.title):
                return True
        return False

    def print_list_book(self, list_books: list) -> None:
        """Распечатывает список книг в формате:\n
        Название: ...\n
        Автор: ...\n
        Статус: ...\n
        Args:
            list_books (list): Список экземпляров класса Book.
        """
        for b in list_books:
            b.print_info_book()

    def add_book(self, book_obj: Book) -> None:
        """Добавляет книгу в библиотеку.
        Args:
            book_obj (Book): Экземпляр объекта Book.
        """
        if (isinstance(book_obj, Book) and not self.is_stock(book_obj)):
            self.lib.append(book_obj)
            print('Книга добелена')
            self.print_list_book([book_obj])

    def out_book(self, title_book: str) -> None:
        """Выдает книгу пользователю.
        Args:
            title_book (str): Строка с название книги.
        """
        for b in self.lib:
            if (b.title == title_book and b.status == True):
                b.status = False
                print('Книга выдана читателю.')
                self.print_list_book([b])
                return
            else:
                continue
        print('Книга в данный момент у читателя на руках.')

    def return_book(self, title_book: str) -> None:
        """Возвращает книгу в библиотеку.
        Args:
            title_book (str): Строка с название книги.
        """
        for b in self.lib:
            if (b.title == title_book):
                b.status = True
                print('Книга возвращена в библиотеку.')
                self.print_list_book([b])

    def search_book(self, prompt: str) -> None:
        """Ищет книгу среди всех зарегистрированных по названию или автору.\n
        Не чувствителен к регистру.\n
        Args:
            prompt (str): Строка содержащая название книги или автора.
        """
        match_count = 0
        match_list = []
        for b in self.lib:
            current_book = f'{b.title} {b.author}'
            if (prompt.lower() in current_book.lower()):
                match_count += 1
                match_list.append(b)
        print(f"Найдено {match_count} совпадений")
        self.print_list_book(match_list)

    def show_status_library(self) -> None:
        """Отображает текущее состояние всех книг в библиотеке."""
        all_stock = len(self.lib)
        in_stock = 0
        out_stock = 0
        for b in self.lib:
            if (b.status):
                in_stock += 1
            else:
                out_stock += 1
        print(f'Книг всего: {all_stock}')
        print(f'Из них: {in_stock} - в наличии')
        print(f'Из них: {out_stock} - выдано читателю')

    def show_nomenclature(self, status: bool = None) -> None:
        """Распечатывает тот или иной список книг в зависимости от аргумента.\n
        Без аргумента: Список всех зарегистрированных в библиотеке книг.\n
        True: Список книг имеющихся в наличии библиотеки.\n
        False: Список книг выданных читателю на данный момент\n
        Args:
            status (bool, optional): Флаг обозначающий тот или иной список.
        """
        status
        all_stock = []
        in_stock = []
        out_stock = []
        for b in self.lib:
            all_stock.append(b)
            if (b.status == True):
                in_stock.append(b)
            else:
                out_stock.append(b)
        if (status == True):
            print(f'Книги в наличии: {len(in_stock)}')
            self.print_list_book(in_stock)
        elif (status == False):
            print(f'Книги выданные читателю: {len(out_stock)}')
            self.print_list_book(out_stock)
        elif (status == None):
            print(f'Всего книг зарегистрировано: {len(all_stock)}')
            self.print_list_book(all_stock)

#######################################################################

b1 = Book("FastAPI", "Билл Любанович")
b2 = Book("Простой Python", "Билл Любанович")
b3 = Book("Чистый код", "Роберт Мартин")
b4 = Book("Идеальная работа", "Роберт Мартин")
b5 = Book("Идеальный программист", "Роберт Мартин")
b6 = Book("Изучаем Python", "Марк Лутц")
b7 = Book("Python Карманный справочник", "Марк Лутц")
b8 = Book("Linux Книга рецептов", "Карла Шрёдер")
b9 = Book("Внутреннее устройство Linux", "Дмитрий Кетов")
b10 = Book("Django 4 в примерах", "Антонио Меле")
b11 = Book("Django 4 в примерах", "Антонио Меле")

library = Library()

library.add_book(b1)
library.add_book(b2)
library.add_book(b3)
library.add_book(b4)
library.add_book(b5)
library.add_book(b6)
library.add_book(b7)
library.add_book(b8)
library.add_book(b9)
library.add_book(b10)
library.add_book(b11)
```

---

Отличная работа! Код выглядит чисто и аккуратно. Давай разберем его и выделим несколько моментов:

### Положительные стороны:

1. **Использование методов классов**:
    - Корректно созданы классы и методы. Все методы выполняют свои задачи, используя объекты класса `Book` для управления статусом книг в библиотеке.
2. **Грамотная реализация методов проверки и поиска**:
    - Методы, такие как `is_stock` и `search_book`, хорошо спроектированы для выполнения задач проверки и поиска по библиотечным книгам.
3. **Функциональность вывода**:
    - Методы `print_list_book`, `show_nomenclature` и `show_status_library` предоставляют полезные сводки и отображают текущие состояния библиотеки. Это делает систему удобной в использовании.

### Что можно улучшить:

1. **Метод `out_book`**:
    - В случае, если книга уже выдана, выводится сообщение, что "Книга в данный момент у читателя на руках". Однако, если книга с таким названием вообще не найдена, логичнее было бы вывести сообщение, что "Книга не найдена в библиотеке". Сейчас, если книга отсутствует, сообщение не явно указывает на эту проблему.
2. **Метод `show_nomenclature`**:
    - Аргумент `status` можно улучшить. Если он всегда принимает значения `True`, `False`, или `None`, стоит вместо `None` сделать этот параметр необязательным, чтобы можно было просто вызывать метод без него для вывода всех книг.
3. **Мелкие оптимизации**:
    - В некоторых местах можно избежать лишних проверок, например, в циклах, где проверяется статус книги.

### Дополнительные рекомендации:

- Добавить обработку ошибок, например, если переданы некорректные данные в методы.
- Улучшить сообщения для пользователя, чтобы ошибки и успехи операций были более очевидными.

В целом, ты отлично справился с задачей! Если захочешь реализовать какие-то из этих улучшений или появятся вопросы, не стесняйся спрашивать.

---

---

## Commit

### prompt

---

Commit

---

Первая реализация поставленной задачи

---

---